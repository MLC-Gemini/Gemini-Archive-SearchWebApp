{
"AWSTemplateFormatVersion": "2010-09-09",
"Description": "CRMS RDS Option group",
	"Resources": {
		"RDSSecurityGroup": {
			"Type": "AWS::EC2::SecurityGroup",
			"Properties": {
				"GroupDescription": "Allow CRMS Application from On-Prem to Access RDS via SSL only",
				"VpcId": "${VPCID}",
				"SecurityGroupIngress": [
					{
						"IpProtocol": "tcp",
						"FromPort": "${RDS_SSL_PORT}",
						"ToPort": "${RDS_SSL_PORT}",
						"CidrIp": "${SSHACCESSCIDR}"
					},
					{
						"IpProtocol": "tcp",
						"FromPort": "${RDS_SSL_PORT}",
						"ToPort": "${RDS_SSL_PORT}",
						"CidrIp": "${SSHACCESSCIDR_TIBCO}"
					}
				]
			}
		},
		"RDSOption": {
			"Type": "AWS::RDS::OptionGroup",
			"Properties": {
				"EngineName": "oracle-ee",
				"MajorEngineVersion": "${CRMS_RDS_MAJOR_VER}",
				"OptionGroupDescription": "CRMS Option Group, e.g. Network Encryption, ZimeZome etc",
				"OptionConfigurations": [
					{"OptionName": "Timezone", "OptionSettings" : [ {"Name":"TIME_ZONE","Value":"Australia/Sydney"} ] },
					{	"OptionName": "SSL", 
						"Port": "${RDS_SSL_PORT}",
						"VpcSecurityGroupMemberships" : [{"Ref":"RDSSecurityGroup"}],
						"OptionSettings" : [ {"Name": "SQLNET.SSL_VERSION", "Value":"1.2"} ]
					}
				]
			}
		}
	}
}
